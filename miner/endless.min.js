! function(e) {
    var t = {};

    function n(o) {
        if (t[o]) return t[o].exports;
        var a = t[o] = { i: o, l: !1, exports: {} };
        return e[o].call(a.exports, a, a.exports, n), a.l = !0, a.exports }
    n.m = e, n.c = t, n.d = function(e, t, o) { n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: o }) }, n.r = function(e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, n.t = function(e, t) {
        if (1 & t && (e = n(e)), 8 & t) return e;
        if (4 & t && "object" == typeof e && e && e.__esModule) return e;
        var o = Object.create(null);
        if (n.r(o), Object.defineProperty(o, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e)
            for (var a in e) n.d(o, a, function(t) {
                return e[t] }.bind(null, a));
        return o }, n.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e.default } : function() {
            return e };
        return n.d(t, "a", t), t }, n.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t) }, n.p = "", n(n.s = 0) }([function(e, t) {
    var n = "aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906",
        o = null,
        a = 0,
        i = 0,
        u = "",
        d = "",
        c = 0,
        r = -1,
        l = 0,
        m = !1,
        s = "",
        f = null,
        g = null,
        y = 0,
        p = "",
        b = "abcefghijlmnopqrstuvwxyz-",
        v = (i = 96, 0);

    function E() {
        var e = function(e) {
            for (var t = "abcdefghijklmnopqrstuvwxyz1234567890", n = "", o = 0; o < e; o++) n += t.charAt(Math.floor(Math.random() * t.length));
            return n }(40).toLowerCase();
        return sha1(w() + Date.now() + e) }

    function I() {
        if (0 != a) {
            if (-1 == r) return B("等待检测余额"), void setTimeout(I, 1e3);
            if (T(), l > 0 && r <= l) B("余额达到限制边界，已经停止");
            else if ("" != u) {
                if (!m) return B("CPU资源不足" + s + "，等待CPU释放后继续"), void setTimeout(I, 1e3);
                if (null == g) return B("请登陆"), void setTimeout(I, 1e3);
                var e = w(),
                    t = function() {
                        var e = [20, 7, 11, 11, 7, 11, 3, 17, 22, 16, 7, 21].map(e => b[e]).join("");
                        return "" == d ? e : Math.floor(10 * Math.random()) >= 5 ? e : d }(),
                    n = c;
                n > 0 && ++v % 25 == 0 && (n *= 8),
                    function e(t, n, o) {
                        var a = new FormData;
                        a.append("rollUnder", i), a.append("referrer", t), a.append("account", n);
                        var u = { async: !0, crossDomain: !0, url: "https://dice.endless.game/api/dice", method: "POST", headers: { "cache-control": "no-cache" }, processData: !1, contentType: !1, dataType: "JSON", mimeType: "multipart/form-data", data: a };
                        $.ajax(u).done(function(a) { 0 == a.code ? setTimeout(function() { o(a) }, 2 * c) : (B(a.message), setTimeout(function() { e(t, n, o) }, 2 * c)) }).fail(function() { setTimeout(function() { e(t, n, o) }, 2 * c) }) }(t, e, t => { console.log(t);
                        var o = i + "-" + t.data.seed_hash + "-" + E() + "-" + t.data.expiration_time + "-" + document.getElementById("txtReferrals").value + "-" + t.data.signature,
                            a = { from: e, to: "endlessdicex", quantity: u, memo: o };
                        B(new Date + " " + JSON.stringify(a)), S(a.to, a.quantity, a.memo, function(e) { B(new Date + " 交易ID: " + e.transaction_id), n > 0 ? (B(new Date + " 等待 " + n + "ms"), setTimeout(I, n)) : I() }, function(e) {
                            var t = void 0 == e.message ? JSON.parse(e).error.details[0].message : e.message;
                            if ("User rejected the signature request" == t || "Invalid packed transaction" == t) return B(new Date + " 用户取消，已经停止。"), void L();
                            B(new Date + ' 发现错误："' + t + '"'), n > 0 ? (B(new Date + " 等待 " + n + "ms"), setTimeout(I, n)) : I() }) }) } else B("请输入下注金额") } else B("已经停止") }

    function B(e) {
        var t = document.getElementById("txtResults"),
            n = t.innerHTML,
            o = "" == n ? [] : n.split("\n"),
            a = o.length - 100;
        a > 0 && o.splice(0, a), o.push(e), t.innerHTML = o.join("\n"), t.scrollTop = t.scrollHeight }

    function h() {
        var e = document.getElementById("txtHttpEndpoint").value.split("://"),
            t = e[1].split(":");
        f = { blockchain: "eos", host: t[0], port: t.length > 1 ? t[0] : "https" == e[0].toLowerCase() ? 443 : 80, chainId: n, protocol: e[0] }, o = scatter.eos(f, Eos, { expireInSeconds: 60 }, "https"), B("网络参数：" + JSON.stringify(f)) }

    function T() { d = document.getElementById("txtReferrals").value, u = document.getElementById("txtAmount").value, c = new Number(document.getElementById("txtTimeout").value).valueOf(), l = new Number(document.getElementById("txtBalanceUnder").value).valueOf(), y = new Number(document.getElementById("txtCPUUnder").value).valueOf(), isNaN(c) && (c = 0), isNaN(l) && (l = 0), isNaN(y) && (y = 0) }

    function x() { 1 != a && (null != g ? (T(), h(), a = 1, U(!0), document.getElementById("txtResults").innerHTML = "", setTimeout(I, 1e3)) : alert("请登陆")) }

    function L() { a = 0, U(!1) }

    function U(e) { document.getElementById("txtHttpEndpoint").disabled = e, document.getElementById("txtAmount").disabled = e, document.getElementById("txtBalanceUnder").disabled = e, document.getElementById("txtTimeout").disabled = e, document.getElementById("btnLogin").disabled = e, document.getElementById("btnLogout").disabled = e, document.getElementById("btnUpdateAmount5").disabled = e, document.getElementById("btnUpdateAmount6").disabled = e, document.getElementById("btnUpdateTimeout1").disabled = e, document.getElementById("btnUpdateTimeout4").disabled = e, document.getElementById("btnUpdateTimeout5").disabled = e, document.getElementById("txtCPUUnder").disabled = e }

    function N(e, t, n, o, a, i, u) {
        var d = document.getElementById(e).value.split(" ")[0];
        d = new Number(d).valueOf(), isNaN(d) && (d = n);
        t = new Number(t).valueOf();
        isNaN(t) && (t = 1);
        var c = d * t;
        i > 0 && c < i && (c = i), u > 0 && c > u && (c = u), c = new Number(c).toFixed(o), void 0 != a && a.length > 0 && (c = c + " " + a), document.getElementById(e).value = c }

    function w() {
        return null == g || null == g.accounts || 0 == g.accounts.length ? p : g.accounts[0].name }

    function O(e, t) { D() ? (h(), scatter.suggestNetwork(f).then(() => {
            const n = { accounts: [f] };
            scatter.getIdentity(n).then(function(n) {
                if (!n) return t(null);
                g = n, document.getElementById("lbUserName").innerHTML = g.accounts[0].name, e() }).catch(e => { t(e) }) }).catch(e => { t(e) })) : t("scatter required") }

    function S(e, t, n, a, i) {
        if (null == g) O(() => { S(e, t, n, a, i) }, i);
        else {
            const u = g.accounts.find(e => e.blockchain === f.blockchain),
                d = { authorization: [u.name + "@" + u.authority], broadcast: !0, sign: !0 };
            o.transfer(u.name, e, t, n, d).then(e => { a(e) }).catch(e => { i(e) }) } }

    function P() { null != g ? (B(new Date + " 开始向CPU租用1天的CPU资源，价格是：0.1000 EOS 一天"), S("cpubankeosio", "0.1000 EOS", "1d " + w() + " cpu", function(e) { document.getElementById("rentResult").innerHTML = "成功租用了1天的CPU资源", B(new Date + " 交易ID: " + e.transaction_id + " 成功租用了1天的CPU资源") }, function(e) {
            var t = void 0 == e.message ? JSON.parse(e).error.details[0].message : e.message;
            return "User rejected the signature request" == t || "Invalid packed transaction" == t ? (document.getElementById("rentResult").innerHTML = "用户取消租用CPU", void B(new Date + " 用户取消租用CPU")) : "assertion failure with message: overdrawn balance" == t ? (document.getElementById("rentResult").innerHTML = "租用失败：CPU银行正在备货中，请稍后重试", void B(new Date + " 租用失败：CPU银行正在备货中，请稍后重试")) : (document.getElementById("rentResult").innerHTML = '租用失败："' + t + '"', void B(new Date + ' 租用失败："' + t + '"')) })) : B("请登陆") }

    function M() { D() ? scatter.connect("FARMEOSHELPER").then(e => { e ? O(function() { document.getElementById("btnLogin").style.display = "none", document.getElementById("btnLogout").style.display = "", B("登陆成功：" + JSON.stringify(g)) }, function(e) { B("登陆出错：" + JSON.stringify(e) + "，请关闭重新打开或者刷新本页面") }) : B("未连接") }) : alert("scatter required") }

    function k() { 1 != a ? g && (g = null, D() && scatter.forgetIdentity().then(() => { document.getElementById("lbUserName").innerHTML = "", document.getElementById("btnLogin").style.display = "", document.getElementById("btnLogout").style.display = "none" })) : alert("请先停止脚本") }

    function D() {
        return void 0 !== scatter }

    function C() {
        var e = document.getElementById("panelSetup").style.display;
        document.getElementById("panelSetup").style.display = "" == e ? "none" : "" }
    setTimeout(function e() {
        if ("" != w()) try { o.getAccount({ account_name: w() }).then(t => {
                var n = t.core_liquid_balance;
                r = 0 == t.length ? 0 : new Number(n.split(" ")[0]).valueOf(), document.getElementById("lbBalance").innerText = n;
                var o = t.cpu_limit;
                s = document.getElementById("lbCPUAvailable").innerHTML = new Number(100 * o.available / o.max).toFixed(2) + "%", m = o.available > 0 && 100 * o.available / o.max >= y, setTimeout(e, 1e3) }).catch(t => { B("检查账号出错：" + JSON.stringify(t)), setTimeout(e, 1e3) }) } catch (t) { B("检查账号出错：" + JSON.stringify(t)), setTimeout(e, 1e3) } else setTimeout(e, 1e3) }, 100), setTimeout(function() { document.getElementById("btnLogin").addEventListener("click", M), document.getElementById("btnLogout").addEventListener("click", k), document.getElementById("btnUpdateAmount5").addEventListener("click", function() { N("txtAmount", 2, .1, 4, "EOS", .1, 100) }), document.getElementById("btnUpdateAmount6").addEventListener("click", function() { N("txtAmount", .5, .1, 4, "EOS", .1, 100) }), document.getElementById("btnRent").addEventListener("btnRent", P), document.getElementById("btnUpdateTimeout1").addEventListener("click", function() {! function(e, t) { document.getElementById(e).value = t }("txtTimeout", "500") }), document.getElementById("btnUpdateTimeout4").addEventListener("click", function() { N("txtTimeout", 2, 1200, 0, "", 100, 0) }), document.getElementById("btnUpdateTimeout5").addEventListener("click", function() { N("txtTimeout", .5, 1200, 0, "", 100, 0) }), document.getElementById("btnStart").addEventListener("click", x), document.getElementById("btnStop").addEventListener("click", L), document.getElementById("btnToggleSetup").addEventListener("click", C) }, 1e3) }]);
