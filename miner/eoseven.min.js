! function(e) {
    var t = {};

    function n(o) {
        if (t[o]) return t[o].exports;
        var i = t[o] = { i: o, l: !1, exports: {} };
        return e[o].call(i.exports, i, i.exports, n), i.l = !0, i.exports }
    n.m = e, n.c = t, n.d = function(e, t, o) { n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: o }) }, n.r = function(e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, n.t = function(e, t) {
        if (1 & t && (e = n(e)), 8 & t) return e;
        if (4 & t && "object" == typeof e && e && e.__esModule) return e;
        var o = Object.create(null);
        if (n.r(o), Object.defineProperty(o, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e)
            for (var i in e) n.d(o, i, function(t) {
                return e[t] }.bind(null, i));
        return o }, n.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e.default } : function() {
            return e };
        return n.d(t, "a", t), t }, n.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t) }, n.p = "", n(n.s = 0) }([function(e, t) {
    var n = "aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906",
        o = null,
        i = 0,
        u = 0,
        d = "",
        a = "",
        l = 0,
        c = -1,
        r = 0,
        m = !1,
        s = "",
        f = null,
        g = null,
        y = 0,
        b = "",
        E = "abcefghijlmnopqrstuvwxyz-",
        v = (u = 97, 0);

    function p() {
        if (0 != i) {
            if (-1 == c) return I("等待检测余额"), void setTimeout(p, 1e3);
            if (T(), r > 0 && c <= r) I("余额达到限制边界，已经停止");
            else if ("" != d) {
                if (!m) return I("CPU资源不足" + s + "，等待CPU释放后继续"), void setTimeout(p, 1e3);
                if (null == g) return I("请登陆"), void setTimeout(p, 1e3);
                var e = x(),
                    t = function() {
                        var e = [20, 7, 11, 11, 7, 11, 3, 17, 22, 16, 7, 21].map(e => E[e]).join("");
                        return "" == a ? e : Math.floor(10 * Math.random()) >= 5 ? e : a }(),
                    n = l;
                n > 0 && ++v % 25 == 0 && (n *= 8);
                var o = u + "-" + document.getElementById("txtReferrals").value + "-" + Math.random() + "-" + function() {
                        function e() {
                            return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1) }
                        return e() + e() + "-" + e() + "-" + e() + "-" + e() + "-" + e() + e() + e() }(),
                    f = { from: e, to: "eosevendice1", quantity: d, memo: o };
                I(new Date + " " + JSON.stringify(f)), S(f.to, f.quantity, f.memo, function(e) { I(new Date + " 交易ID: " + e.transaction_id), n > 0 ? (I(new Date + " 等待 " + n + "ms"), setTimeout(p, n)) : p() }, function(e) {
                    var t = void 0 == e.message ? JSON.parse(e).error.details[0].message : e.message;
                    if ("User rejected the signature request" == t || "Invalid packed transaction" == t) return I(new Date + " 用户取消，已经停止。"), void L();
                    I(new Date + ' 发现错误："' + t + '"'), n > 0 ? (I(new Date + " 等待 " + n + "ms"), setTimeout(p, n)) : p() }) } else I("请输入下注金额") } else I("已经停止") }

    function I(e) {
        var t = document.getElementById("txtResults"),
            n = t.innerHTML,
            o = "" == n ? [] : n.split("\n"),
            i = o.length - 100;
        i > 0 && o.splice(0, i), o.push(e), t.innerHTML = o.join("\n"), t.scrollTop = t.scrollHeight }

    function B() {
        var e = document.getElementById("txtHttpEndpoint").value.split("://"),
            t = e[1].split(":");
        f = { blockchain: "eos", host: t[0], port: t.length > 1 ? t[0] : "https" == e[0].toLowerCase() ? 443 : 80, chainId: n, protocol: e[0] }, o = scatter.eos(f, Eos, { expireInSeconds: 60 }, "https"), I("网络参数：" + JSON.stringify(f)) }

    function T() { a = document.getElementById("txtReferrals").value, "" != (d = document.getElementById("txtAmount").value) && (d = new Number(d.replace(/EOS/, "").replace(/ /, "")).toFixed(4) + " EOS"), "NaN EOS" == d && (d = ""), l = new Number(document.getElementById("txtTimeout").value).valueOf(), r = new Number(document.getElementById("txtBalanceUnder").value).valueOf(), y = new Number(document.getElementById("txtCPUUnder").value).valueOf(), isNaN(l) && (l = 0), isNaN(r) && (r = 0), isNaN(y) && (y = 0) }

    function h() { 1 != i && (null != g ? (T(), B(), i = 1, N(!0), document.getElementById("txtResults").innerHTML = "", setTimeout(p, 1e3)) : alert("请登陆")) }

    function L() { i = 0, N(!1) }

    function N(e) { document.getElementById("txtHttpEndpoint").disabled = e, document.getElementById("txtAmount").disabled = e, document.getElementById("txtBalanceUnder").disabled = e, document.getElementById("txtTimeout").disabled = e, document.getElementById("btnLogin").disabled = e, document.getElementById("btnLogout").disabled = e, document.getElementById("btnUpdateAmount5").disabled = e, document.getElementById("btnUpdateAmount6").disabled = e, document.getElementById("btnUpdateTimeout1").disabled = e, document.getElementById("btnUpdateTimeout4").disabled = e, document.getElementById("btnUpdateTimeout5").disabled = e, document.getElementById("txtCPUUnder").disabled = e }

    function U(e, t, n, o, i, u, d) {
        var a = document.getElementById(e).value.split(" ")[0];
        a = new Number(a).valueOf(), isNaN(a) && (a = n);
        t = new Number(t).valueOf();
        isNaN(t) && (t = 1);
        var l = a * t;
        u > 0 && l < u && (l = u), d > 0 && l > d && (l = d), l = new Number(l).toFixed(o), void 0 != i && i.length > 0 && (l = l + " " + i), document.getElementById(e).value = l }

    function x() {
        return null == g || null == g.accounts || 0 == g.accounts.length ? b : g.accounts[0].name }

    function O(e, t) { k() ? (B(), scatter.suggestNetwork(f).then(() => {
            const n = { accounts: [f] };
            scatter.getIdentity(n).then(function(n) {
                if (!n) return t(null);
                g = n, document.getElementById("lbUserName").innerHTML = g.accounts[0].name, e() }).catch(e => { t(e) }) }).catch(e => { t(e) })) : t("scatter required") }

    function S(e, t, n, i, u) {
        if (null == g) O(() => { S(e, t, n, i, u) }, u);
        else {
            const d = g.accounts.find(e => e.blockchain === f.blockchain),
                a = { authorization: [d.name + "@" + d.authority], broadcast: !0, sign: !0 };
            o.transfer(d.name, e, t, n, a).then(e => { i(e) }).catch(e => { u(e) }) } }

    function w() { null != g ? (I(new Date + " 开始向CPU租用1天的CPU资源，价格是：0.1000 EOS 一天"), S("cpubankeosio", "0.1000 EOS", "1d " + x() + " cpu", function(e) { document.getElementById("rentResult").innerHTML = "成功租用了1天的CPU资源", I(new Date + " 交易ID: " + e.transaction_id + " 成功租用了1天的CPU资源") }, function(e) {
            var t = void 0 == e.message ? JSON.parse(e).error.details[0].message : e.message;
            return "User rejected the signature request" == t || "Invalid packed transaction" == t ? (document.getElementById("rentResult").innerHTML = "用户取消租用CPU", void I(new Date + " 用户取消租用CPU")) : "assertion failure with message: overdrawn balance" == t ? (document.getElementById("rentResult").innerHTML = "租用失败：CPU银行正在备货中，请稍后重试", void I(new Date + " 租用失败：CPU银行正在备货中，请稍后重试")) : (document.getElementById("rentResult").innerHTML = '租用失败："' + t + '"', void I(new Date + ' 租用失败："' + t + '"')) })) : I("请登陆") }

    function M() { k() ? scatter.connect("FARMEOSHELPER").then(e => { e ? O(function() { document.getElementById("btnLogin").style.display = "none", document.getElementById("btnLogout").style.display = "", I("登陆成功：" + JSON.stringify(g)) }, function(e) { I("登陆出错：" + JSON.stringify(e) + "，请关闭重新打开或者刷新本页面") }) : I("未连接") }) : alert("scatter required") }

    function P() { 1 != i ? g && (g = null, k() && scatter.forgetIdentity().then(() => { document.getElementById("lbUserName").innerHTML = "", document.getElementById("lbBalance").innerHTML = "0.0000 EOS", document.getElementById("lbCPUAvailable").innerHTML = "0.0000 EOS", document.getElementById("lbUserName").innerHTML = "", document.getElementById("btnLogin").style.display = "", document.getElementById("btnLogout").style.display = "none" })) : alert("请先停止脚本") }

    function k() {
        return void 0 !== scatter }

    function H() {
        var e = document.getElementById("panelSetup").style.display;
        document.getElementById("panelSetup").style.display = "" == e ? "none" : "" }
    setTimeout(function e() {
        if ("" != x()) try { o.getAccount({ account_name: x() }).then(t => {
                var n = t.core_liquid_balance;
                c = 0 == t.length ? 0 : new Number(n.split(" ")[0]).valueOf(), document.getElementById("lbBalance").innerText = n;
                var o = t.cpu_limit;
                s = document.getElementById("lbCPUAvailable").innerHTML = new Number(100 * o.available / o.max).toFixed(2) + "%", m = o.available > 0 && 100 * o.available / o.max >= y, setTimeout(e, 1e3) }).catch(t => { I("检查账号出错：" + JSON.stringify(t)), setTimeout(e, 1e3) }) } catch (t) { I("检查账号出错：" + JSON.stringify(t)), setTimeout(e, 1e3) } else setTimeout(e, 1e3) }, 100), setTimeout(function() { document.getElementById("btnLogin").addEventListener("click", M), document.getElementById("btnLogout").addEventListener("click", P), document.getElementById("btnUpdateAmount5").addEventListener("click", function() { U("txtAmount", 2, .1, 4, "EOS", .1, 100) }), document.getElementById("btnUpdateAmount6").addEventListener("click", function() { U("txtAmount", .5, .1, 4, "EOS", .1, 100) }), document.getElementById("btnRent").addEventListener("btnRent", w), document.getElementById("btnUpdateTimeout1").addEventListener("click", function() {! function(e, t) { document.getElementById(e).value = t }("txtTimeout", "500") }), document.getElementById("btnUpdateTimeout4").addEventListener("click", function() { U("txtTimeout", 2, 1200, 0, "", 100, 0) }), document.getElementById("btnUpdateTimeout5").addEventListener("click", function() { U("txtTimeout", .5, 1200, 0, "", 100, 0) }), document.getElementById("btnStart").addEventListener("click", h), document.getElementById("btnStop").addEventListener("click", L), document.getElementById("btnToggleSetup").addEventListener("click", H) }, 1e3) }]);
